@use "../../design/layout.scss";
@use "../../design/colors.scss";
@use "../../design/animate.scss";
@use "../../design/position.scss";
@use "sass:map";

$sizes: (
  sm: (
    height: 30px,
    border-radius: 20px,
  ),
  md: (
    height: 35px,
    border-radius: 30px,
  ),
  lg: (
    height: 40px,
    border-radius: 40px,
  ),
);

$knob-sizes: (
  sm: 20px,
  md: 25px,
  lg: 30px,
);

$start-left: 4px;

.rc-switch {
  @include animate.halo(40px);

  min-width: 60px;
  padding: 0.1rem;
  user-select: none;

  &.rc-disabled {
    @extend %disabled;
  }
}

.rc-disabled {
  .rc-switch-knob {
    box-shadow: none;
  }
}

.rc-switch-track {
  @extend %center;
  cursor: pointer;
  position: relative;

  &:not(.rc-switch-track-disabled):focus-within::after {
    border: 10px solid rgba(colors.$secondary, 0.75);
  }

  @each $key, $val in $sizes {
    &.rc-switch-#{$key} {
      @each $attr, $value in $val {
        #{$attr}: #{$value};
      }

      .rc-switch-label-on {
        margin-right: map.get($knob-sizes, $key);
      }

      .rc-switch-label-off {
        margin-left: map.get($knob-sizes, $key);
      }
    }
  }

  &.rc-switch-on {
    background-color: colors.$primary;
  }

  &.rc-switch-off {
    background-color: colors.$gray;
  }
}

.rc-switch-knob {
  @extend %shadow-small;
  @include animate.set-animation(0.2s);
  @include position.position-abs("center left");
  background-color: colors.$white;
  border-radius: 50%;
  display: block;
  left: $start-left;
  transition: background-color 0.1s ease;

  @each $key, $val in $knob-sizes {
    &.rc-switch-knob-#{$key} {
      $settings: (
        from: (
          left: $start-left,
        ),
        to: (
          left: calc(100% - $val - 4px),
        ),
      );
      height: $val;
      width: $val;

      &.rc-switch-on {
        @extend %shadow-small;
        @include animate.set-keyframes(slide-right-#{$key}, $settings);
        animation-name: slide-right-#{$key};
        left: calc(100% - $val - 4px);
      }

      &.rc-switch-off {
        @include animate.set-keyframes(slide-left-#{$key}, $settings, true);
        animation-name: slide-left-#{$key};
        background-color: colors.$white;
        right: calc(100% - $val - 4px);
      }
    }
  }
}

.rc-switch-label {
  @extend %center;
  display: block;
  white-space: nowrap;

  &.rc-switch-label-on {
    color: colors.$white;
  }
}
