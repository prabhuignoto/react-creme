@use '../../design/core.scss';
@use '../../design/list.scss';
@use '../../design/theme.scss';
@use '../../design/animate.scss';
@use '../../design/position.scss';

$sizes: (sm, md, lg);
$padding-sizes: (
  sm: 0.5rem,
  md: 0.5rem,
  lg: 0.5rem,
);

.rc-tags-wrapper {
  &.rc-tags-rtl {
    direction: rtl;
  }

  &.rc-tags-disabled {
    @extend %disabled;
  }

  &.rc-tags-wrap {
    @extend %list-wrap;
  }

  &:not(.rc-tags-wrap) {
    @extend %list-horizontal-left;
  }
}

.rc-tag {
  $settings: (
    from: (
      visibility: hidden,
      opacity: 0,
    ),
    to: (
      visibility: visible,
      opacity: 1,
    ),
  );
  @include animate.set-settings(0.1s, linear);
  @include animate.set-keyframes('tag-fade-in', $settings);
  @include animate.set-keyframes('tag-fade-out', $settings, true);

  justify-items: center;
  margin: 0.5rem 0.25rem;
  max-width: var(--width);
  min-width: 40px;

  padding: 0.4rem 0.5rem;
  transform: scale(1);

  user-select: none;
  visibility: visible;

  &:not(.rc-tag-disabled):not(.rc-tag-readonly) {
    display: grid;
    grid-template-columns: calc(var(--width) - 1rem) 1rem;
  }

  &.rc-tag-disabled,
  &.rc-tag-readonly {
    @extend %center;
  }

  &.rc-tag-disabled {
    pointer-events: none;
  }

  &.rc-tag-style-fill {
    @extend %border-radius;
    background: rgba(theme.$primary-rgb, 1);
    color: theme.$white;
  }

  &.rc-tag-style-default {
    @extend %border;
    @extend %shadow-inset-small;
  }

  &.rc-tag-accent-rounded {
    border-radius: 40px;
  }

  &.rc-tag-readonly {
    @extend %center;
  }

  &.rc-tag-marked-for-removal {
    animation-name: tag-fade-out;
    max-width: var(--width);
    transform: scale(0.98);
    visibility: hidden;
  }
}

@each $size in $sizes {
  .rc-tag-#{$size} {
    .rc-tag-icon {
      @extend %icon-#{$size};
    }

    .rc-tag-name {
      @extend %font-#{$size};
    }
  }
}

.rc-tag-icon {
  align-self: center;
  border-radius: 50%;
  cursor: pointer;
  display: block;
  justify-self: flex-end;

  &.rc-tag-icon-editable {
    visibility: visible;
  }

  &:not(.rc-tag-icon-editable) {
    visibility: hidden;
    width: 0;
  }

  &:hover::after {
    @include position.position-abs('center center');
    border-radius: 50%;
    content: '';
    display: block;
    height: 110%;
    width: 110%;
    z-index: -1;
  }
}

.rc-tag-icon-fill {
  &:hover::after {
    background: rgba(theme.$white, 1);
  }

  &:hover {
    color: theme.$primary;
  }
}

.rc-tag-icon-default {
  &:hover::after {
    background: theme.$primary;
  }

  &:hover {
    color: theme.$white;
  }
}

.rc-tags-input-wrapper {
  margin-left: 0.25rem;
  position: relative;
}

.rc-tag-name {
  @extend %text-no-wrap;
  display: block;
  text-align: center;
  width: 100%;

  @each $size in $sizes {
    &.rc-tag-name-#{$size} {
      @extend %font-#{$size};
    }
  }
}
