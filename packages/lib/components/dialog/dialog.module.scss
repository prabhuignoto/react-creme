@use '@design/core.scss';
@use '@design/theme.scss';
@use '@design/button.scss';
@use '@design/tokens.scss';
@use '@design/hybrid-theme.scss' as hybrid;

// ============================================================================
// DIALOG COMPONENT
// ============================================================================

.dialog {
  // 1. Variables (must come first for Sass 1.92.0+)
  $min-width-default: 300px;
  $min-height-default: 300px;

  // 2. Extends
  @extend %col;

  // 3. Properties (before nested rules)
  border-radius: hybrid.$radius-lg;
  box-shadow: hybrid.$shadow-strong;
  min-height: $min-height-default;
  min-width: var(--min-width, $min-width-default);
  outline: none;
  position: relative;

  // 4. Entrance animation
  @include hybrid.fade-in-scale(hybrid.$animation-duration-primary);

  // 5. Nested selectors
  &.dark {
    background-color: theme.$dark-control-bg;
    box-shadow: hybrid.$shadow-strong;
  }

  &:not(.dark) {
    background-color: theme.$white;
  }

  &.exiting {
    @include hybrid.exit-fade(hybrid.$animation-duration-secondary);
  }

  &.isLoading {
    @include hybrid.state-loading();
  }

  &.isSuccess {
    @include hybrid.state-success();
  }

  &.isError {
    @include hybrid.state-error();
  }

  &:focus-visible {
    @include hybrid.focus-outline(theme.$primary);
  }

  // Legacy animation support (backward compatibility)
  &.pop_enter,
  &.fade-in-scale {
    @include hybrid.fade-in-scale(hybrid.$animation-duration-primary);
  }

  &.drop_enter {
    @include hybrid.slide-in(down, hybrid.$animation-duration-primary);
  }

  &.rise_enter {
    @include hybrid.slide-in(up, hybrid.$animation-duration-primary);
  }

  &.slide-left_enter {
    @include hybrid.slide-in(left, hybrid.$animation-duration-primary);
  }

  &.slide-right_enter {
    @include hybrid.slide-in(right, hybrid.$animation-duration-primary);
  }

  // Legacy exit animations
  &.pop_leave,
  &.drop_leave,
  &.rise_leave,
  &.slide-left_leave,
  &.slide-right_leave {
    @include hybrid.exit-fade(hybrid.$animation-duration-secondary);
  }
}

// ============================================================================
// HEADER
// ============================================================================

.header {
  // 2. Extends
  @extend %left;

  // 3. Properties
  margin: tokens.$space-1 0;
  width: 100%;

  // 4. Smooth transitions
  @include hybrid.smooth-transition(all);
}

// ============================================================================
// BODY
// ============================================================================

.body {
  // 2. Extends
  @extend %center;

  // 3. Properties
  padding: tokens.$space-2;
  width: 100%;

  // 4. Smooth transitions
  @include hybrid.smooth-transition(all);
}

// ============================================================================
// FOOTER
// ============================================================================

.footer {
  // 2. Extends
  @extend %right;

  // 3. Properties
  margin-bottom: tokens.$space-4;
  margin-right: tokens.$space-6;
  margin-top: auto;
  width: 100%;

  // 4. Smooth transitions
  @include hybrid.smooth-transition(all);

  // 5. Nested selectors
  [role='button']:first-of-type {
    margin-right: tokens.$space-2;
  }
}

// ============================================================================
// TITLE
// ============================================================================

.title {
  // 2. Extends
  @extend %center;
  @extend %font-md;

  // 3. Properties
  margin: 0;
  padding-left: tokens.$space-4;

  // 4. Nested selectors
  &.dark {
    color: theme.$white;
  }

  &:not(.dark) {
    color: theme.$primary;
  }
}

// ============================================================================
// BUTTON WRAPPER
// ============================================================================

.button_wrapper {
  margin-left: auto;
  margin-right: tokens.$space-2;
  margin-top: tokens.$space-1;
}

// ============================================================================
// SCREEN READER ONLY
// ============================================================================

.srOnly {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

// ============================================================================
// ACCESSIBILITY: REDUCED MOTION
// ============================================================================

@media (prefers-reduced-motion: reduce) {
  .dialog {
    animation: none !important;
  }
}
