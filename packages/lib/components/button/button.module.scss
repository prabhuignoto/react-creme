@use '@design/core.scss';
@use '@design/theme.scss';
@use '@design/button.scss';
@use '@design/animate.scss';
@use '@design/tokens.scss';
@use '@design/hybrid-theme.scss' as hybrid;
@use 'sass:map';

$types: (primary, default, danger);
$sizes: (sm, md, lg);

// Base button styles
@mixin baseButtonStyles {
  &.no_border {
    border: 0;
    box-shadow: none;
  }

  &:not(.icon) {
    min-width: tokens.$space-6; // 24px minimum width
  }

  &:not(.flat):not(.dark) {
    @extend %border;
  }

  &.dark:not(.flat) {
    @extend %border-radius;
  }

  // Interactive feedback with spring physics
  @include hybrid.smooth-multi-transition(transform, box-shadow);

  // Active state with spring animation
  &:active:not(.disabled) {
    animation: hybrid-refined-ping hybrid.$animation-duration-critical hybrid.$spring-easing;
  }

  @media (prefers-reduced-motion: reduce) {
    animation: none;
    transition: none;
  }
}

.btn {
  @include baseButtonStyles;
}

// Styles for different types of buttons
@mixin buttonTypes {
  @each $value in $types {
    .#{$value} {
      @extend %button-#{$value};

      // Styles for disabled buttons
      &.disabled {
        @extend %disabled;
        border: 1px solid transparent;
      }
    }
  }
}

@include buttonTypes;

// Styles for different sizes of buttons
@mixin buttonSizes {
  @each $size in $sizes {
    .#{$size} {
      @extend %text-#{$size};
      @extend %button-#{$size};

      // Styles for icon container
      .icon_container {
        @extend %icon-#{$size};
      }

      // Styles for label
      .label {
        @extend %font-#{$size};
      }
    }
  }
}

@include buttonSizes;

// Base label styles
@mixin baseLabelStyles {
  @extend %text-no-wrap;
  text-transform: capitalize;
}

.label {
  @include baseLabelStyles;
}

// Styles for different sizes of labels and icons
@mixin labelAndIconSizes {
  @each $size in $sizes {
    .#{$size} {
      .label {
        @extend %font-#{$size};
      }

      .icon {
        @extend %icon-#{$size};
      }
    }
  }
}

@include labelAndIconSizes;

// Base icon styles
@mixin baseIconStyles {
  border-radius: hybrid.$radius-sm;

  // Styles for disabled icon
  &.disabled {
    @include hybrid.state-disabled();
  }

  // Background color for non-disabled and non-dark icons
  &:not(.disabled):not(.dark) {
    background: theme.$light-bg;
  }

  // Hover styles with lift effect for non-disabled and non-dark icons
  @include hybrid.hover-feedback() {
    &.dark:not(.disabled) {
      background: theme.$primary;

      svg {
        color: theme.$white;
      }
    }

    &:not(.dark):not(.disabled) {
      @include hybrid.hover-lift(2px, true);
      background: theme.$primary;
      color: theme.$white;
    }
  }

  // Background color for dark icons that are not disabled
  &.dark:not(.disabled) {
    background: theme.$dark-control-bg;
  }
}

.icon {
  @include baseIconStyles;
}

// Styles for label when it follows an icon container
.icon_container + .label {
  margin-left: tokens.$space-1;
}

// Styles for progress wrapper (spinner with margin)
.progress_wrapper {
  margin-right: tokens.$space-2; // 8px spacing between spinner and content
}
