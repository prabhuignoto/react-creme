@use 'theme.scss';
@use 'core.scss';
@use 'tokens.scss';

// Button heights meet WCAG 2.1 Level AA minimum touch target (44px)
// Padding includes space for icons and text
$btn-sm-height: 2.75rem; // 44px - minimum for touch accessibility
$btn-md-height: 3rem;    // 48px - recommended for better usability
$btn-lg-height: 3.25rem; // 52px - comfortable for large buttons

%button {
  @extend %center;
  background: none;
  cursor: pointer;
  transition: background 0.2s ease-in;
  white-space: nowrap;

  // Respect prefers-reduced-motion for accessibility
  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }

  svg {
    color: theme.$primary;
  }

  &:hover svg {
    color: theme.$white;
  }

  // Focus styles for keyboard navigation
  &:focus-visible {
    outline: 2px solid theme.$primary;
    outline-offset: 2px;
  }
}

@mixin get-button-type($bg, $bg-hover, $color, $color-hover) {
  background: $bg;
  color: $color;

  svg {
    color: $color;
  }

  &:hover {
    svg {
      color: $color-hover;
    }
  }

  &:hover:not(.rc-disabled) {
    background: $bg-hover;
    box-shadow: none;
    color: $color-hover;
  }
}

%button-primary {
  @include get-button-type(
    rgba(theme.$primary-rgb, 0.85),
    theme.$primary,
    theme.$white,
    theme.$white
  );
}

%button-danger {
  @include get-button-type(
    rgba(theme.$crimson, 0.9),
    theme.$crimson,
    theme.$white,
    theme.$white
  );
  border: 1px solid theme.$crimson;
}

%button-default {
  &.dark {
    @include get-button-type(
      theme.$cod-gray,
      theme.$primary,
      theme.$white,
      theme.$white
    );
  }

  &:not(.dark) {
    @extend %shadow-inset-small;
    @include get-button-type(
      theme.$white,
      theme.$primary,
      theme.$primary,
      theme.$white
    );
  }
}

%button-icon {
  @extend %button;
  border: 0;
}

%button-icon:hover {
  svg {
    color: theme.$white;
  }
}

@mixin get-button($size, $border) {
  @extend %button;

  &:not(.icon) {
    @if $size == small {
      height: $btn-sm-height;
      // Vertical padding: 0.5rem (8px), Horizontal: 1rem (16px)
      padding: tokens.$space-2 tokens.$space-4;
    } @else if $size == medium {
      height: $btn-md-height;
      // Vertical padding: 0.75rem (12px), Horizontal: 1.25rem (20px)
      padding: tokens.$space-3 tokens.$space-5;
    } @else if $size == large {
      height: $btn-lg-height;
      // Vertical padding: 1rem (16px), Horizontal: 1.5rem (24px)
      padding: tokens.$space-4 tokens.$space-6;
    }
  }

  &.icon {
    border: 0;
  }
}

%button-sm {
  @include get-button(small, true);
}

%button-md {
  @include get-button(medium, true);
}

%button-lg {
  @include get-button(large, true);
}

%button-sm-no-border {
  @include get-button(small, false);
}
%button-lg-no-border {
  @include get-button(large, false);
}
